<include file="public@header" />
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>服务商</title>
</head>

<body>
    <a class="btn btn-primary" onclick="addClient()">增加</a>
    <table class="table table-hover table-bordered">
        <thead>
            <tr>
                <!-- <th style="text-align: center;">编号</th> -->
                <th style="text-align: center;">服务商</th>
                <th style="text-align: center;">操作</th>
            </tr>
        </thead>
        <tbody>
            <foreach name="clients" item="c">
                <tr>
                    <!-- <td style="text-align: center;">{$c.id}</td> -->
                    <td style="text-align: center;">{$c.user_login}</td>
                    <td style="text-align: center;"><a class="btn btn-primary" onclick="updateClient('{$c.id}')">修改</a>
                        <a class="btn btn-danger" onclick="deleteClient('{$c.id}')">删除</a>
                    </td>
                </tr>
            </foreach>
</body>
<script>
    function addClient() {
        var url = "{:url('manager/postClientAdd')}";
        Wind.use("layer", function () {
            layer.prompt({ title: '服务商名字', formType: 2 }, function (text, index) {
                $.post(url, { user_login: text }, function (e) {
                    window.location.reload();
                })
                layer.close(index);
            });
        });
    }

    function updateClient(id) {
        var url = "{:url('manager/postClientUpdate')}";
        Wind.use("layer", function () {
            layer.prompt({ title: '服务商名字', formType: 2 }, function (text, index) {
                $.post(url, { user_login: text, id: id }, function (e) {
                    window.location.reload();
                })
                layer.close(index);
            });
        });
    }

    function deleteClient(id) {
        var url = "{:url('manager/postClientDelete')}";
        Wind.use("layer", function () {
            layer.confirm('确定要删除这个服务商吗？',{ title: '', btn: ['确定','取消']}, function (text, index) {
                $.post(url, { id: id }, function (e) {
                    window.location.reload();
                })
                layer.close(index);
            });
        });
    }
</script>

</html>