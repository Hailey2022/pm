<include file="public@header" />
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>更新工程信息</title>
    <script type="text/html" id="photos-item-tpl">
        <li id="saved-image{id}">
            <input id="photo-{id}" type="hidden" name="file_urls[]" value="{filepath}">
            <input class="form-control" id="photo-{id}-name" type="text" name="file_names[]" value="{name}"
                   style="width: 370px;" title="图片名称">
            <img id="photo-{id}-preview" src="{url}" style="height:36px;width: 36px;"
                 onclick="imagePreviewDialog(this.src);">
            <a href="javascript:uploadOneImage('图片上传','#photo-{id}');">替换</a>
            <a href="javascript:(function(){$('#saved-image{id}').remove();})();">移除</a>
        </li>
    </script>
    <script type="text/html" id="files-item-tpl">
        <li id="saved-file{id}">
            <input id="file-{id}" type="hidden" name="file_urls[]" value="{filepath}">
            <input class="form-control" id="file-{id}-name" type="text" name="file_names[]" value="{name}"
                   style="width: 370px;" title="文件名称">
            <a id="file-{id}-preview" href="{preview_url}" target="_blank">下载</a>
            <a href="javascript:uploadOne('文件上传','#file-{id}','file');">替换</a>
            <a href="javascript:(function(){$('#saved-file{id}').remove();})();">移除</a>
        </li>
    </script>
    <link href="__STATIC__/js/bootstrap-datetimepicker/css/bootstrap-datetimepicker.css" rel="stylesheet"
        media="screen">
    <link src="__STATIC__/js/wind.js">
    </link>
    <style>
        .信息框大框 {
            width: 96%;
            margin-top: 50px;
        }

        .信息框标题 {
            width: 200px;
            height: 22px;
            line-height: 20px;
            text-align: center;
        }

        .信息框标题 span {
            padding: 1px 1px;
            margin-top: auto;
            margin-right: 10px;
        }

        .信息框标题 a.工程加号 a.工程减号 {
            cursor: pointer;
        }

        a:hover {
            text-decoration: none;
        }

        .信息框边框 {
            border: 1px solid #333;
            padding: 5px;
            clear: both;
            border-color: #18BC9C;
            border-style: none;
        }

        ul {
            list-style-type: none;
        }

        .上下宽度 {
            padding: 1%;
            border-style: dashed dashed dashed dashed;
            margin-top: 5px;
            border-radius: 16px;
            border-color: #18BC9C;
        }

        .btn-primary {
            color: #333333;
            background-color: #c2fbd7;
            border-color: #c2fbd7;
        }

        * {
            user-select: none;
        }

        .button-s {
            --color: #18BC9C;
            font-family: inherit;
            display: inline-block;
            width: 8em;
            height: 2.6em;
            line-height: 2.5em;
            margin: 20px;
            position: relative;
            overflow: hidden;
            border: 0px solid var(--color);
            transition: color .5s;
            z-index: 1;
            font-size: 17px;
            border-radius: 6px;
            font-weight: 500;
            color: var(--color);
            margin-left: 100px !important;
        }

        .button-s:before {
            content: "";
            position: absolute;
            z-index: -1;
            background: var(--color) !important;
            height: 150px !important;
            width: 200px !important;
            border-radius: 80% !important;
        }

        .button-s:hover {
            color: #fff;
        }

        .button-s:before {
            top: 100% !important;
            left: 100% !important;
            transition: all .7s !important;
        }

        .button-s:hover:before {
            top: -30px !important;
            left: -30px !important;
        }

        .button-s:active:before {
            background: #18BC9C !important;
            transition: background 0s !important;
        }

        .左 {
            margin-right: 30px;
        }

        .右 {
            margin-left: 30px;
        }

        label {
            font-size: 10px;
        }

        input[type="text"] {
            font-size: 10px;
        }

        input[type="number"] {
            font-size: 10px;
        }

        select {
            font-size: 10px;
        }

        textarea[type="text"] {
            font-size: 10px;
        }

        @media screen and (min-width: 768px) {
            .uploadfiles {
                padding-left: 26%;
            }
        }
    </style>
</head>

<body>
    <form method="post" class="form-horizontal js-ajax-form" action="{:url('manager/postProjectUpdate')}">
        <input name="projectId" type="text" style="display: none;" value="{$project.projectId}">
        <div class="信息框大框" style="min-width: 920px">
            <div class="信息框标题"><a style="font-size: 150%;">工程基本信息</a></div>
            <div class="上下宽度 右">
                <div class="form-group">
                    <div class="右 左">
                        <label for="input-project-name" class="col-sm-1 control-label">工程名称</label>
                        <div class="col-sm-3" style="padding-bottom: 10px;">
                            <input class="form-control" id="input-project-name" name="projectName" type="text" required
                                value="{$project.projectName}">
                        </div>
                    </div>
                    <div class="右 左">
                        <label for="input-construction-name" class="col-sm-1 control-label">建设单位</label>
                        <div class="col-sm-3" style="padding-bottom: 10px;">
                            <input class="form-control" id="input-construction-name" name="constructionCompany"
                                type="text" value="{$project.constructionCompany}">
                        </div>
                    </div>
                    <div class="右 左">
                        <label for="input-construction-year" class="col-sm-1 control-label">建设年份</label>
                        <div class="col-sm-3" style="padding-bottom: 10px;">
                            <input class="form-control" id="input-construction-year" name="constructionYear" type="text"
                                value="{$project.constructionYear}">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="右 左">
                        <label for="input-estimatedPrice" class="col-sm-1 control-label">估算价</label>
                        <div class="col-sm-3" style="padding-bottom: 10px;">
                            <input class="form-control" id="input-estimatedPrice" name="estimatedPrice" type="number"
                                onkeyup="updateEstimatedPriceChineseNum()" value="{$project.estimatedPrice}">
                            <input class="form-control" id="chinese-estimatedPrice" type="text" readonly>
                        </div>
                    </div>
                    <div class="右 左">
                        <label for="input-reportedBudget" class="col-sm-1 control-label">上报预算价</label>
                        <div class="col-sm-3" style="padding-bottom: 10px;">
                            <input class="form-control" id="input-reportedBudget" name="reportedBudget" type="text"
                                onkeyup="updateReportedBudgetChineseNum()" value="{$project.reportedBudget}">
                            <input class="form-control" id="chinese-reportedBudget" type="text" readonly>
                        </div>
                    </div>
                    <div class="右 左">
                        <label for="input-approvedBudget" class="col-sm-1 control-label">批复预算价</label>
                        <div class="col-sm-3" style="padding-bottom: 10px;">
                            <input class="form-control" id="input-approvedBudget" name="approvedBudget" type="text"
                                onkeyup="updateApprovedBudgetChineseNum()" value="{$project.approvedBudget}">
                            <input class="form-control" id="chinese-approvedBudget" type="text" readonly>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="右 左">
                        <label for="tenderingMethod" class="col-sm-1 control-label">招标方式</label>
                        <div class="col-sm-3">
                            <select class="form-control" list="tenderingMethod" name="tenderingMethod"
                                id="input-tenderingMethod" required value="{$project.tenderingMethod}">
                                <datalist id="tenderingMethod">
                                    <foreach name="tenderingMethods" item="m">
                                        <if condition="$project.tenderingMethod == $m.id">
                                            <option name="tenderingMethod" selected value="{$m.id}"> {$m.method}
                                            </option>
                                            <else />
                                            <option name="tenderingMethod" value="{$m.id}"> {$m.method}</option>
                                        </if>
                                    </foreach>
                                </datalist>
                            </select>
                        </div>
                    </div>
                    <div class="右 左">
                        <label for="projectStatus" class="col-sm-1 control-label">实施阶段</label>
                        <div class="col-sm-3">
                            <select class="form-control" list="projectStatus" name="projectStatusId"
                                id="input-projectStatus" required>
                                <datalist id="projectStatus">
                                    <foreach name="theProjectStatus" item="s">
                                        <if condition="$project.projectStatusId == $s.id">
                                            <option name="projectStatus" selected value="{$s.id}"> {$s.projectStatus}
                                            </option>
                                            <else />
                                            <option name="projectStatus" value="{$s.id}"> {$s.projectStatus}</option>
                                        </if>
                                    </foreach>
                                </datalist>
                            </select>
                        </div>
                    </div>
                    <div class="右 左">
                        <label for="file-5-name" class="col-sm-1 control-label">预算上报文件</label>
                        <div class="col-sm-3" style="padding-bottom: 10px;">
                            <input id="file-5" type="hidden" name="file_url_5" value="{$project.file_url_5}">
                            <input class="form-control" id="file-5-name" type="text" name="file_name_5" title="预算上报文件"
                                value="{$project.file_name_5}">
                            <a id="file-5-preview" target="_blank" href="{$project.file_url_5}"
                                download="{$project.file_name_5}">下载</a>
                            <a href="javascript:uploadOne('预算上报文件上传','#file-5','file');">上传</a>
                            <a class="previewBtn">预览</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="信息框大框" style="min-width: 920px">
            <div class="信息框标题"><a style="font-size: 150%;">可研阶段</a></div>
            <div class="上下宽度 右">
                <div class="form-group">
                    <div class="右 左">
                        <label for="file-1-name" class="col-sm-1 control-label">可研报告</label>
                        <div class="col-sm-3" style="padding-bottom: 10px;">
                            <input id="file-1" type="hidden" name="file_url_1" value="{$project.file_url_1}">
                            <input class="form-control" id="file-1-name" type="text" name="file_name_1" title="可研报告"
                                value="{$project.file_name_1}">
                            <a id="file-1-preview" target="_blank" href="{$project.file_url_1}"
                                download="{$project.file_name_1}">下载</a>
                            <a href="javascript:uploadOne('可研报告上传','#file-1','file');">上传</a>
                            <a class="previewBtn">预览</a>
                        </div>
                    </div>
                    <div class="右 左">
                        <label for="file-7-name" class="col-sm-1 control-label">可研审批文件</label>
                        <div class="col-sm-3" style="padding-bottom: 10px;">
                            <input id="file-7" type="hidden" name="file_url_7" value="{$project.file_url_7}">
                            <input class="form-control" id="file-7-name" type="text" name="file_name_7" title="可研审批文件"
                                value="{$project.file_name_7}">
                            <a id="file-7-preview" target="_blank" href="{$project.file_url_7}"
                                download="{$project.file_name_7}">下载</a>
                            <a href="javascript:uploadOne('可研审批文件上传','#file-7','file');">上传</a>
                            <a class="previewBtn">预览</a>
                        </div>
                    </div>
                    <div class="右 左">
                        <label for="file-2-name" class="col-sm-1 control-label">可研批复</label>
                        <div class="col-sm-3" style="padding-bottom: 10px;">
                            <input id="file-2" type="hidden" name="file_url_2" value="{$project.file_url_2}">
                            <input class="form-control" id="file-2-name" type="text" name="file_name_2" title="可研批复"
                                value="{$project.file_name_2}">
                            <a id="file-2-preview" target="_blank" href="{$project.file_url_2}"
                                download="{$project.file_name_2}">下载</a>
                            <a href="javascript:uploadOne('可研批复上传','#file-2','file');">上传</a>
                            <a class="previewBtn">预览</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="信息框大框" style="min-width: 920px">
            <div class="信息框标题"><a style="font-size: 150%;">初步设计阶段</a></div>
            <div class="上下宽度 右">
                <div class="form-group">
                    <div class="右 左">
                        <label for="file-3-name" class="col-sm-1 control-label">初步设计报告</label>
                        <div class="col-sm-3" style="padding-bottom: 10px;">
                            <input id="file-3" type="hidden" name="file_url_3" value="{$project.file_url_3}">
                            <input class="form-control" id="file-3-name" type="text" name="file_name_3" title="初步设计报告"
                                value="{$project.file_name_3}">
                            <a id="file-3-preview" target="_blank" href="{$project.file_url_3}"
                                download="{$project.file_name_3}">下载</a>
                            <a href="javascript:uploadOne('初步设计报告上传','#file-3','file');">上传</a>
                            <a class="previewBtn">预览</a>
                        </div>
                    </div>
                    <div class="右 左">
                        <label for="file-8-name" class="col-sm-1 control-label">初步设计图纸</label>
                        <div class="col-sm-3" style="padding-bottom: 10px;">
                            <input id="file-8" type="hidden" name="file_url_8" value="{$project.file_url_8}">
                            <input class="form-control" id="file-8-name" type="text" name="file_name_8" title="初步设计图纸"
                                value="{$project.file_name_8}">
                            <a id="file-8-preview" target="_blank" href="{$project.file_url_8}"
                                download="{$project.file_name_8}">下载</a>
                            <a href="javascript:uploadOne('初步设计图纸上传','#file-8','file');">上传</a>
                            <a class="previewBtn">预览</a>
                        </div>
                    </div>

                    <div class="右 左">
                        <label for="file_url_4" class="col-sm-1 control-label">初步设计批复</label>
                        <div class="col-sm-3" style="padding-bottom: 10px;">
                            <input id="file-4" type="hidden" name="file_url_4" value="{$project.file_url_4}">
                            <input class="form-control" id="file-4-name" type="text" name="file_name_4" title="初步设计批复"
                                value="{$project.file_name_4}">
                            <a id="file-4-preview" target="_blank" href="{$project.file_url_4}"
                                download="{$project.file_name_4}">下载</a>
                            <a href="javascript:uploadOne('初步设计批复上传','#file-4','file');">上传</a>
                            <a class="previewBtn">预览</a>
                        </div>
                    </div>

                </div>
                <br>
                <div class="form-group">
                    <div class="右 左">
                        <label for="file-9-name" class="col-sm-1 control-label">审批请示和批复</label>
                        <div class="col-sm-3" style="padding-bottom: 10px;">
                            <input id="file-9" type="hidden" name="file_url_9" value="{$project.file_url_9}">
                            <input class="form-control" id="file-9-name" type="text" name="file_name_9" title="审批请示和批复"
                                value="{$project.file_name_9}">
                            <a id="file-9-preview" target="_blank" href="{$project.file_url_9}"
                                download="{$project.file_name_9}">下载</a>
                            <a href="javascript:uploadOne('审批请示和批复上传','#file-9','file');">上传</a>
                            <a class="previewBtn">预览</a>
                        </div>
                    </div>
                    <div class="右 左">
                        <label for="file-10-name" class="col-sm-1 control-label">概算书</label>
                        <div class="col-sm-3" style="padding-bottom: 10px;">
                            <input id="file-10" type="hidden" name="file_url_10" value="{$project.file_url_10}">
                            <input class="form-control" id="file-10-name" type="text" name="file_name_10" title="概算书"
                                value="{$project.file_name_10}">
                            <a id="file-10-preview" target="_blank" href="{$project.file_url_10}"
                                download="{$project.file_name_10}">下载</a>
                            <a href="javascript:uploadOne('概算书上传','#file-10','file');">上传</a>
                            <a class="previewBtn">预览</a>
                        </div>
                    </div>
                </div>
                <br>
                <div class="form-group">
                    <div class="右 左">
                        <label for="input-approximatePrice" class="col-sm-1 control-label">批复概算价</label>
                        <div class="col-sm-3" style="padding-bottom: 10px;">
                            <input class="form-control" id="input-approximatePrice" name="approximatePrice"
                                type="number" onkeyup="updateApproximatePriceChineseNum()" value="{$project.approximatePrice}" >
                            <input class="form-control" id="chinese-approximatePrice" type="text" readonly>
                        </div>
                    </div>
                    <div class="右 左">
                        <label for="input-fee1" class="col-sm-1 control-label">建安费</label>
                        <div class="col-sm-3" style="padding-bottom: 10px;">
                            <input class="form-control" id="input-fee1" name="fee1" type="number"
                                onkeyup="updateFeeChineseNum(1)" value="{$project.fee1}" >
                            <input class="form-control" id="chinese-fee1" type="text" readonly>
                        </div>
                    </div>
                    <div class="右 左">
                        <label for="input-fee2" class="col-sm-1 control-label">监理费</label>
                        <div class="col-sm-3" style="padding-bottom: 10px;">
                            <input class="form-control" id="input-fee2" name="fee2" type="number"
                                onkeyup="updateFeeChineseNum(2)" value="{$project.fee2}" >
                            <input class="form-control" id="chinese-fee2" type="text" readonly>
                        </div>
                    </div>

                </div>
                <br>
                <div class="form-group">
                    <div class="右 左">
                        <label for="input-fee3" class="col-sm-1 control-label">检测费</label>
                        <div class="col-sm-3" style="padding-bottom: 10px;">
                            <input class="form-control" id="input-fee3" name="fee3" type="number"
                                onkeyup="updateFeeChineseNum(3)" value="{$project.fee3}" >
                            <input class="form-control" id="chinese-fee3" type="text" readonly>
                        </div>
                    </div>
                    <div class="右 左">
                        <label for="input-fee4" class="col-sm-1 control-label">造价咨询费</label>
                        <div class="col-sm-3" style="padding-bottom: 10px;">
                            <input class="form-control" id="input-fee4" name="fee4" type="number"
                                onkeyup="updateFeeChineseNum(4)" value="{$project.fee4}" >
                            <input class="form-control" id="chinese-fee4" type="text" readonly>
                        </div>
                    </div>
                    <div class="右 左">
                        <label for="input-fee5" class="col-sm-1 control-label">其他</label>
                        <div class="col-sm-3" style="padding-bottom: 10px;">
                            <input class="form-control" id="input-fee5" name="fee5" type="number"
                                onkeyup="updateFeeChineseNum(5)" value="{$project.fee5}" >
                            <input class="form-control" id="chinese-fee5" type="text" readonly>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="信息框大框" style="min-width: 920px">
            <div class="信息框标题"><a style="font-size: 150%;">施工图预算阶段</a></div>
            <div class="上下宽度 右">
                <div class="form-group">
                    <div class="右 左">
                        <label for="file_name_6" class="col-sm-1 control-label">施工图</label>
                        <div class="col-sm-3" style="padding-bottom: 10px;">
                            <input id="file-6" type="hidden" name="file_url_6" value="{$project.file_url_6}">
                            <input class="form-control" id="file-6-name" type="text" name="file_name_6" title="施工图"
                                value="{$project.file_name_6}">
                            <a id="file-6-preview" target="_blank" href="{$project.file_url_6}"
                                download="{$project.file_name_6}">下载</a>
                            <a href="javascript:uploadOne('施工图上传','#file-6','file');">上传</a>
                            <a class="previewBtn">预览</a>
                        </div>
                    </div>
                    <div class="右 左">
                        <label for="file-11-name" class="col-sm-1 control-label">预算书</label>
                        <div class="col-sm-3" style="padding-bottom: 10px;">
                            <input id="file-11" type="hidden" name="file_url_11" value="{$project.file_url_11}">
                            <input class="form-control" id="file-11-name" type="text" name="file_name_11" title="预算书"
                                value="{$project.file_name_11}">
                            <a id="file-11-preview" target="_blank" href="{$project.file_url_11}"
                                download="{$project.file_name_11}">下载</a>
                            <a href="javascript:uploadOne('预算书上传','#file-11','file');">上传</a>
                            <a class="previewBtn">预览</a>
                        </div>
                    </div>
                    <div class="右 左">
                        <label for="file-12-name" class="col-sm-1 control-label">定案预算书</label>
                        <div class="col-sm-3" style="padding-bottom: 10px;">
                            <input id="file-12" type="hidden" name="file_url_12" value="{$project.file_url_12}">
                            <input class="form-control" id="file-12-name" type="text" name="file_name_12" title="定案预算书"
                                value="{$project.file_name_12}">
                            <a id="file-12-preview" target="_blank" href="{$project.file_url_12}"
                                download="{$project.file_name_12}">下载</a>
                            <a href="javascript:uploadOne('定案预算书上传','#file-12','file');">上传</a>
                            <a class="previewBtn">预览</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="信息框大框" style="min-width: 920px">
            <div class="信息框标题"><a style="font-size: 150%;">工程招标</a></div>
            <div class="上下宽度 右">
                <div class="form-group">
                    <div class="右 左">
                        <label for="file_name_13" class="col-sm-1 control-label">选定代理上会材料</label>
                        <div class="col-sm-3" style="padding-bottom: 10px;">
                            <input id="file-13" type="hidden" name="file_url_13" value="{$project.file_url_13}">
                            <input class="form-control" id="file-13-name" type="text" name="file_name_13"
                                title="选定代理上会材料" value="{$project.file_name_13}">
                            <a id="file-13-preview" target="_blank" href="{$project.file_url_13}"
                                download="{$project.file_name_13}">下载</a>
                            <a href="javascript:uploadOne('选定代理上会材料上传','#file-13','file');">上传</a>
                            <a class="previewBtn">预览</a>
                        </div>
                    </div>
                    <div class="右 左">
                        <label for="file-14-name" class="col-sm-1 control-label">招标代理合同签批</label>
                        <div class="col-sm-3" style="padding-bottom: 10px;">
                            <input id="file-14" type="hidden" name="file_url_14" value="{$project.file_url_14}">
                            <input class="form-control" id="file-14-name" type="text" name="file_name_14"
                                title="招标代理合同签批" value="{$project.file_name_14}">
                            <a id="file-14-preview" target="_blank" href="{$project.file_url_14}"
                                download="{$project.file_name_14}">下载</a>
                            <a href="javascript:uploadOne('招标代理合同签批上传','#file-14','file');">上传</a>
                            <a class="previewBtn">预览</a>
                        </div>
                    </div>
                    <div class="右 左">
                        <label for="file-15-name" class="col-sm-1 control-label">招标文件签批</label>
                        <div class="col-sm-3" style="padding-bottom: 10px;">
                            <input id="file-15" type="hidden" name="file_url_15" value="{$project.file_url_15}">
                            <input class="form-control" id="file-15-name" type="text" name="file_name_15" title="招标文件签批"
                                value="{$project.file_name_15}">
                            <a id="file-15-preview" target="_blank" href="{$project.file_url_15}"
                                download="{$project.file_name_15}">下载</a>
                            <a href="javascript:uploadOne('招标文件签批上传','#file-15','file');">上传</a>
                            <a class="previewBtn">预览</a>
                        </div>
                    </div>
                </div>
                <br>
                <div class="form-group">
                    <div class="右 左">
                        <label for="file_name_16" class="col-sm-1 control-label">招标过程文件</label>
                        <div class="col-sm-3" style="padding-bottom: 10px;">
                            <input id="file-16" type="hidden" name="file_url_16" value="{$project.file_url_16}">
                            <input class="form-control" id="file-16-name" type="text" name="file_name_16" title="招标过程文件"
                                value="{$project.file_name_16}">
                            <a id="file-16-preview" target="_blank" href="{$project.file_url_16}"
                                download="{$project.file_name_16}">下载</a>
                            <a href="javascript:uploadOne('招标过程文件上传','#file-16','file');">上传</a>
                            <a class="previewBtn">预览</a>
                        </div>
                    </div>
                    <div class="右 左">
                        <label for="file-17-name" class="col-sm-1 control-label">中标标书</label>
                        <div class="col-sm-3" style="padding-bottom: 10px;">
                            <input id="file-17" type="hidden" name="file_url_17" value="{$project.file_url_17}">
                            <input class="form-control" id="file-17-name" type="text" name="file_name_17" title="中标标书"
                                value="{$project.file_name_17}">
                            <a id="file-17-preview" target="_blank" href="{$project.file_url_17}"
                                download="{$project.file_name_17}">下载</a>
                            <a href="javascript:uploadOne('中标标书上传','#file-17','file');">上传</a>
                            <a class="previewBtn">预览</a>
                        </div>
                    </div>
                    <div class="右 左">
                        <label for="file-18-name" class="col-sm-1 control-label">施工招标</label>
                        <div class="col-sm-3" style="padding-bottom: 10px;">
                            <input id="file-18" type="hidden" name="file_url_18" value="{$project.file_url_18}">
                            <input class="form-control" id="file-18-name" type="text" name="file_name_18" title="施工招标"
                                value="{$project.file_name_18}">
                            <a id="file-18-preview" target="_blank" href="{$project.file_url_18}"
                                download="{$project.file_name_18}">下载</a>
                            <a href="javascript:uploadOne('施工招标上传','#file-18','file');">上传</a>
                            <a class="previewBtn">预览</a>
                        </div>
                    </div>
                </div>
                <br>
                <div class="form-group">
                    <div class="右 左">
                        <label for="file_name_19" class="col-sm-1 control-label">监理招标</label>
                        <div class="col-sm-3" style="padding-bottom: 10px;">
                            <input id="file-19" type="hidden" name="file_url_19" value="{$project.file_url_19}">
                            <input class="form-control" id="file-19-name" type="text" name="file_name_19" title="监理招标"
                                value="{$project.file_name_19}">
                            <a id="file-19-preview" target="_blank" href="{$project.file_url_19}"
                                download="{$project.file_name_19}">下载</a>
                            <a href="javascript:uploadOne('监理招标上传','#file-19','file');">上传</a>
                            <a class="previewBtn">预览</a>
                        </div>
                    </div>
                    <div class="右 左">
                        <label for="file-20-name" class="col-sm-1 control-label">检测招标</label>
                        <div class="col-sm-3" style="padding-bottom: 10px;">
                            <input id="file-20" type="hidden" name="file_url_20" value="{$project.file_url_20}">
                            <input class="form-control" id="file-20-name" type="text" name="file_name_20" title="检测招标"
                                value="{$project.file_name_20}">
                            <a id="file-20-preview" target="_blank" href="{$project.file_url_20}"
                                download="{$project.file_name_20}">下载</a>
                            <a href="javascript:uploadOne('检测招标上传','#file-20','file');">上传</a>
                            <a class="previewBtn">预览</a>
                        </div>
                    </div>
                    <div class="右 左">
                        <label for="file-21-name" class="col-sm-1 control-label">造价咨询招标</label>
                        <div class="col-sm-3" style="padding-bottom: 10px;">
                            <input id="file-21" type="hidden" name="file_url_21" value="{$project.file_url_21}">
                            <input class="form-control" id="file-21-name" type="text" name="file_name_21" title="造价咨询招标"
                                value="{$project.file_name_21}">
                            <a id="file-21-preview" target="_blank" href="{$project.file_url_21}"
                                download="{$project.file_name_21}">下载</a>
                            <a href="javascript:uploadOne('造价咨询招标上传','#file-21','file');">上传</a>
                            <a class="previewBtn">预览</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <button id="add_project_submit" style="display: none;"></button>
    </form>
    <div class="form-group">
        <div class="">
            <div class="col-md-3">
                <button class="button-s" id="" onclick="handleUpload()">
                    更新
                </button>
            </div>
            <div class="col-md-3">
                <button class="button-s" onclick="return ask()">
                    返回
                </button>
            </div>
        </div>
    </div>
</body>
<script>
    $('.previewBtn').on('click', function () {
        var url = $(this).prev().prev().prev().val();
        if (url == "") {
            alert("请先上传")
            return
        }
        var link = '/upload/' + url
        handlePreview(link)
    });
    $('#add_project_submit').on("click", function () {
        $('xfli').each(function () {
            var str0 = '';
            $(this).find("input:hidden[name='file_urls[]']").each(function () {
                str0 += $(this).val() + '|'
            });
            $(this).find("input:hidden[name='uploadfiles[]']").val(str0.substring(0, str0.lastIndexOf('|')));
            var str1 = '';
            $(this).find("input:text[name='file_names[]']").each(function () {
                str1 += $(this).val() + '|'
            });
            $(this).find("input:hidden[name='uploadfilenames[]']").val(str1.substring(0, str1.lastIndexOf('|')));
        });
    });
    function convertCurrency(r) { var t = ["零", "壹", "贰", "叁", "肆", "伍", "陆", "柒", "捌", "玖"], e = ["", "拾", "佰", "仟"], n = ["", "万", "亿", "兆"], s = ["角", "分", "毫", "厘"], a = "整", f = "元", i = 1e15, u, o, v = "", l; if ("" == r) return ""; if ((r = parseFloat(r)) >= 1e15) return ""; if (0 == r) return v = "零元整"; if (-1 == (r = r.toString()).indexOf(".") ? (u = r, o = "") : (u = (l = r.split("."))[0], o = l[1].substr(0, 4)), parseInt(u, 10) > 0) { for (var p = 0, b = u.length, c = 0; c < b; c++) { var g, h = b - c - 1, I = h / 4, d = h % 4; "0" == (g = u.substr(c, 1)) ? p++ : (p > 0 && (v += "零"), p = 0, v += t[parseInt(g)] + e[d]), 0 == d && p < 4 && (v += n[I]) } v += "元" } if ("" != o) for (var x = o.length, c = 0; c < x; c++) { var g; "0" != (g = o.substr(c, 1)) && (v += t[+g] + s[c]) } return "" == v ? v += "零元整" : "" == o && (v += "整"), v }
    $('.contractAmount').on("keyup", function () {
        $(this).parent().next().next().children().first().val(convertCurrency(Math.abs($(this).val())))
    });
    function updateEstimatedPriceChineseNum() {
        var num = convertCurrency(Math.abs($("#input-estimatedPrice").val()))
        $("#chinese-estimatedPrice").val(num);
    }
    function updateApproximatePriceChineseNum() {
        var num = convertCurrency(Math.abs($("#input-approximatePrice").val()))
        $("#chinese-approximatePrice").val(num);
    }
    function updateReportedBudgetChineseNum() {
        var num = convertCurrency(Math.abs($("#input-reportedBudget").val()))
        $("#chinese-reportedBudget").val(num);
    }
    function updateApprovedBudgetChineseNum() {
        var num = convertCurrency(Math.abs($("#input-approvedBudget").val()))
        $("#chinese-approvedBudget").val(num);
    }
    function updateFeeChineseNum(id) {
        var num = convertCurrency(Math.abs($("#input-fee" + id).val()))
        $("#chinese-fee" + id).val(num);
    }
    function ask() {
        if (confirm("确定返回？")) { window.location.href = "{:url('manager/view')}" } else { return false }
    }
    function parseInteger(n) {
        return isNaN(parseInt(n)) ? 0 : parseInt(n)
    }
    function handleUpload() {
        if ($("#input-approximatePrice").val() != (parseInteger($("#input-fee1").val()) + parseInteger($("#input-fee2").val()) + parseInteger($("#input-fee3").val()) + parseInteger($("#input-fee4").val()) + parseInteger($("#input-fee5").val()))) {
            alert("请检查批复概算价的值")
        } else {
            $('#add_project_submit').click()
        }
    }
    (function(){
        updateApprovedBudgetChineseNum()
        updateApproximatePriceChineseNum()
        updateEstimatedPriceChineseNum()
        updateReportedBudgetChineseNum()
        for(var i=1; i<6; i++){
            updateFeeChineseNum(i)
        }
    })()
</script>
<script type="text/javascript" src="__STATIC__/js/admin.js"></script>
<script type="text/javascript" src="__STATIC__/js/frontend.js"></script>
<script type="text/javascript">
    function handlePreview(url) {
        if (url == "") {
            alert("请先上传")
            return
        }
        if (url.slice(-3) == 'pdf') {
            window.open(url, '预览pdf');
            return;
        } else if (url.slice(-3) == 'png' || url.slice(-3) == 'jpg' || url.slice(-4) == 'jepg') {
            var openstr = '<img align="center" height="550" style="margin-top:8px;margin-left:8px" src="' + url + '" />';
        } else {
            var openstr = '此格式暂不支持预览,请<a href="' + url + '" target="_blank">下载</a>后再查看'
        }
        parent.openIframeLayer(openstr, '预览', {
            type: 1,
            skin: 'layui-layer-rim',
            closeBtn: 1,
            shadeClose: true,
            area: ['900px', '600px']
        })
    }
</script>

</html>