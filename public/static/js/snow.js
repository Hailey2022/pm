var snowStorm=function(e,t){this.autoStart=!0,this.excludeMobile=!0,this.flakesMax=128,this.flakesMaxActive=64,this.animationInterval=33,this.useGPU=!0,this.className=null,this.excludeMobile=!0,this.flakeBottom=null,this.followMouse=!0,this.snowColor="#fff",this.snowCharacter="&bull;",this.snowStick=!0,this.targetElement=null,this.useMeltEffect=!0,this.useTwinkleEffect=!1,this.usePositionFixed=!1,this.usePixelPosition=!1,this.freezeOnBlur=!0,this.flakeLeftOffset=0,this.flakeRightOffset=0,this.flakeWidth=8,this.flakeHeight=8,this.vMaxX=5,this.vMaxY=4,this.zIndex=0;var i=this,s,n=navigator.userAgent.match(/msie/i),l=navigator.userAgent.match(/msie 6/i),o=navigator.userAgent.match(/mobile|opera m(ob|in)/i),a,r=n&&"BackCompat"===t.compatMode||l,f=null,m=null,h=null,u=null,c=null,d=null,v=null,p=1,y=2,k=6,g=!1,x=!1,w=function(){try{t.createElement("div").style.opacity="0.5"}catch(e){return!1}return!0}(),F=!1,b=t.createDocumentFragment();function E(e,t){return isNaN(t)&&(t=0),Math.random()*e+t}function z(e){return 1===parseInt(E(2),10)?-1*e:e}function H(){e.setTimeout(function(){i.start(!0)},20),i.events.remove(n?t:e,"mousemove",H)}function M(){i.excludeMobile&&o||H(),i.events.remove(e,"load",M)}return s=function(){var s;function n(t){e.setTimeout(t,1e3/(i.animationInterval||20))}var l=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||n,o;function a(e){var t;return void 0!==o.style[e]?e:null}s=l?function(){return l.apply(e,arguments)}:null,o=t.createElement("div");var r={transform:{ie:a("-ms-transform"),moz:a("MozTransform"),opera:a("OTransform"),webkit:a("webkitTransform"),w3:a("transform"),prop:null},getAnimationFrame:s};return r.transform.prop=r.transform.w3||r.transform.moz||r.transform.webkit||r.transform.ie||r.transform.opera,o=null,r}(),this.timer=null,this.flakes=[],this.disabled=!1,this.active=!1,this.meltFrameCount=20,this.meltFrames=[],this.setXY=function(e,t,s){if(!e)return!1;i.usePixelPosition||x?(e.style.left=t-i.flakeWidth+"px",e.style.top=s-i.flakeHeight+"px"):r?(e.style.right=100-t/f*100+"%",e.style.top=Math.min(s,c-i.flakeHeight)+"px"):i.flakeBottom?(e.style.right=100-t/f*100+"%",e.style.top=Math.min(s,c-i.flakeHeight)+"px"):(e.style.right=100-t/f*100+"%",e.style.bottom=100-s/h*100+"%")},this.events=function(){var t=!e.addEventListener&&e.attachEvent,i=Array.prototype.slice,s={add:t?"attachEvent":"addEventListener",remove:t?"detachEvent":"removeEventListener"};function n(e){var s=i.call(e),n=s.length;return t?(s[1]="on"+s[1],n>3&&s.pop()):3===n&&s.push(!1),s}function l(e,i){var n=e.shift(),l=[s[i]];t?n[l](e[0],e[1]):n[l].apply(n,e)}function o(){l(n(arguments),"add")}function a(){l(n(arguments),"remove")}return{add:o,remove:a}}(),this.randomizeWind=function(){var e;if(d=z(E(i.vMaxX,.2)),v=E(i.vMaxY,.2),this.flakes)for(e=0;e<this.flakes.length;e++)this.flakes[e].active&&this.flakes[e].setVelocities()},this.scrollHandler=function(){var s;if(u=i.flakeBottom?0:parseInt(e.scrollY||t.documentElement.scrollTop||(r?t.body.scrollTop:0),10),isNaN(u)&&(u=0),!g&&!i.flakeBottom&&i.flakes)for(s=0;s<i.flakes.length;s++)0===i.flakes[s].active&&i.flakes[s].stick()},this.resizeHandler=function(){e.innerWidth||e.innerHeight?(f=e.innerWidth-16-i.flakeRightOffset,h=i.flakeBottom||e.innerHeight):(f=(t.documentElement.clientWidth||t.body.clientWidth||t.body.scrollWidth)-(n?0:8)-i.flakeRightOffset,h=i.flakeBottom||t.documentElement.clientHeight||t.body.clientHeight||t.body.scrollHeight),c=t.body.offsetHeight,m=parseInt(f/2,10)},this.resizeHandlerAlt=function(){f=i.targetElement.offsetWidth-i.flakeRightOffset,h=i.flakeBottom||i.targetElement.offsetHeight,m=parseInt(f/2,10),c=t.body.offsetHeight},this.freeze=function(){if(i.disabled)return!1;i.disabled=1,i.timer=null},this.resume=function(){if(!i.disabled)return!1;i.disabled=0,i.timerInit()},this.toggleSnow=function(){i.flakes.length?(i.active=!i.active,i.active?(i.show(),i.resume()):(i.stop(),i.freeze())):i.start()},this.stop=function(){var s;for(this.freeze(),s=0;s<this.flakes.length;s++)this.flakes[s].o.style.display="none";i.events.remove(e,"scroll",i.scrollHandler),i.events.remove(e,"resize",i.resizeHandler),i.freezeOnBlur&&(n?(i.events.remove(t,"focusout",i.freeze),i.events.remove(t,"focusin",i.resume)):(i.events.remove(e,"blur",i.freeze),i.events.remove(e,"focus",i.resume)))},this.show=function(){var e;for(e=0;e<this.flakes.length;e++)this.flakes[e].o.style.display="block"},this.SnowFlake=function(e,n,l){var o=this;this.type=e,this.x=n||parseInt(E(f-20),10),this.y=isNaN(l)?-E(h)-12:l,this.vX=null,this.vY=null,this.vAmpTypes=[1,1.2,1.4,1.6,1.8],this.vAmp=this.vAmpTypes[this.type]||1,this.melting=!1,this.meltFrameCount=i.meltFrameCount,this.meltFrames=i.meltFrames,this.meltFrame=0,this.twinkleFrame=0,this.active=1,this.fontSize=10+this.type/5*10,this.o=t.createElement("div"),this.o.innerHTML=i.snowCharacter,i.className&&this.o.setAttribute("class",i.className),this.o.style.color=i.snowColor,this.o.style.position=g?"fixed":"absolute",i.useGPU&&s.transform.prop&&(this.o.style[s.transform.prop]="translate3d(0px, 0px, 0px)"),this.o.style.width=i.flakeWidth+"px",this.o.style.height=i.flakeHeight+"px",this.o.style.fontFamily="arial,verdana",this.o.style.cursor="default",this.o.style.overflow="hidden",this.o.style.fontWeight="normal",this.o.style.zIndex=i.zIndex,b.appendChild(this.o),this.refresh=function(){if(isNaN(o.x)||isNaN(o.y))return!1;i.setXY(o.o,o.x,o.y)},this.stick=function(){r||i.targetElement!==t.documentElement&&i.targetElement!==t.body?o.o.style.top=h+u-i.flakeHeight+"px":i.flakeBottom?o.o.style.top=i.flakeBottom+"px":(o.o.style.display="none",o.o.style.bottom="0%",o.o.style.position="fixed",o.o.style.display="block")},this.vCheck=function(){o.vX>=0&&o.vX<.2?o.vX=.2:o.vX<0&&o.vX>-.2&&(o.vX=-.2),o.vY>=0&&o.vY<.2&&(o.vY=.2)},this.move=function(){var e=o.vX*p,t;o.x+=e,o.y+=o.vY*o.vAmp,o.x>=f||f-o.x<i.flakeWidth?o.x=0:e<0&&o.x-i.flakeLeftOffset<-i.flakeWidth&&(o.x=f-i.flakeWidth-1),o.refresh(),(t=h+u-o.y+i.flakeHeight)<i.flakeHeight?(o.active=0,i.snowStick?o.stick():o.recycle()):(i.useMeltEffect&&o.active&&o.type<3&&!o.melting&&Math.random()>.998&&(o.melting=!0,o.melt()),i.useTwinkleEffect&&(o.twinkleFrame<0?Math.random()>.97&&(o.twinkleFrame=parseInt(8*Math.random(),10)):(o.twinkleFrame--,w?o.o.style.opacity=o.twinkleFrame&&o.twinkleFrame%2==0?0:1:o.o.style.visibility=o.twinkleFrame&&o.twinkleFrame%2==0?"hidden":"visible")))},this.animate=function(){o.move()},this.setVelocities=function(){o.vX=d+E(.12*i.vMaxX,.1),o.vY=v+E(.12*i.vMaxY,.1)},this.setOpacity=function(e,t){if(!w)return!1;e.style.opacity=t},this.melt=function(){i.useMeltEffect&&o.melting&&o.meltFrame<o.meltFrameCount?(o.setOpacity(o.o,o.meltFrames[o.meltFrame]),o.o.style.fontSize=o.fontSize-o.fontSize*(o.meltFrame/o.meltFrameCount)+"px",o.o.style.lineHeight=i.flakeHeight+2+.75*i.flakeHeight*(o.meltFrame/o.meltFrameCount)+"px",o.meltFrame++):o.recycle()},this.recycle=function(){o.o.style.display="none",o.o.style.position=g?"fixed":"absolute",o.o.style.bottom="auto",o.setVelocities(),o.vCheck(),o.meltFrame=0,o.melting=!1,o.setOpacity(o.o,1),o.o.style.padding="0px",o.o.style.margin="0px",o.o.style.fontSize=o.fontSize+"px",o.o.style.lineHeight=i.flakeHeight+2+"px",o.o.style.textAlign="center",o.o.style.verticalAlign="baseline",o.x=parseInt(E(f-i.flakeWidth-20),10),o.y=parseInt(-1*E(h),10)-i.flakeHeight,o.refresh(),o.o.style.display="block",o.active=1},this.recycle(),this.refresh()},this.snow=function(){var e=0,t=null,n,l;for(n=0,l=i.flakes.length;n<l;n++)1===i.flakes[n].active&&(i.flakes[n].move(),e++),i.flakes[n].melting&&i.flakes[n].melt();e<i.flakesMaxActive&&0===(t=i.flakes[parseInt(E(i.flakes.length),10)]).active&&(t.melting=!0),i.timer&&s.getAnimationFrame(i.snow)},this.mouseMove=function(e){if(!i.followMouse)return!0;var t=parseInt(e.clientX,10);p=t<m?t/m*2-2:(t-=m)/m*2},this.createSnow=function(e,t){var s;for(s=0;s<e;s++)i.flakes[i.flakes.length]=new i.SnowFlake(parseInt(E(6),10)),(t||s>i.flakesMaxActive)&&(i.flakes[i.flakes.length-1].active=-1);i.targetElement.appendChild(b)},this.timerInit=function(){i.timer=!0,i.snow()},this.init=function(){var s;for(s=0;s<i.meltFrameCount;s++)i.meltFrames.push(1-s/i.meltFrameCount);i.randomizeWind(),i.createSnow(i.flakesMax),i.events.add(e,"resize",i.resizeHandler),i.events.add(e,"scroll",i.scrollHandler),i.freezeOnBlur&&(n?(i.events.add(t,"focusout",i.freeze),i.events.add(t,"focusin",i.resume)):(i.events.add(e,"blur",i.freeze),i.events.add(e,"focus",i.resume))),i.resizeHandler(),i.scrollHandler(),i.followMouse&&i.events.add(n?t:e,"mousemove",i.mouseMove),i.animationInterval=Math.max(20,i.animationInterval),i.timerInit()},this.start=function(s){if(F){if(s)return!0}else F=!0;if("string"==typeof i.targetElement){var n=i.targetElement;if(i.targetElement=t.getElementById(n),!i.targetElement)throw Error('Snowstorm: Unable to get targetElement "'+n+'"')}if(i.targetElement||(i.targetElement=t.body||t.documentElement),i.targetElement!==t.documentElement&&i.targetElement!==t.body&&(i.resizeHandler=i.resizeHandlerAlt,i.usePixelPosition=!0),i.resizeHandler(),i.usePositionFixed=i.usePositionFixed&&!r&&!i.flakeBottom,e.getComputedStyle)try{x="relative"===e.getComputedStyle(i.targetElement,null).getPropertyValue("position")}catch(e){x=!1}g=i.usePositionFixed,f&&h&&!i.disabled&&(i.init(),i.active=!0)},i.autoStart&&i.events.add(e,"load",M,!1),this}(window,document);